<div class="item-menu">
  {{#if (and adminMode session.current_user.permission.item_list_filter)}}
    <div class={{if (and adminMode session.current_user.permission.category_read) "item-type-menu" "item-type-menu item-type-menu-corner"}}>
      {{#if session.current_user.permission.category_read}}
        <span class="item-type-menu-item">
          <a href="#" class={{if (eq "categories" typeFilter) "active"}} {{action "setTypeFilter" "categories"}}>
            Categories
          </a>
        </span>
      {{/if}}
      {{#if session.current_user.permission.template_read}}
        <span class="item-type-menu-item">
          <a href="#" class={{if (eq "templates" typeFilter) "active"}} {{action "setTypeFilter" "templates"}}>
            Templates
          </a>
        </span>
      {{/if}}
      {{#if session.current_user.permission.item_read}}
        <span class="item-type-menu-item">
          <a href="#" class={{if (eq "items" typeFilter) "active"}} {{action "setTypeFilter" "items"}}>
            Items
          </a>
        </span>
      {{/if}}
    </div>
  {{/if}}

  <div class="item-stat-menu">
      Items: {{filteredContent.length}}
  </div>

  {{#if session.current_user.permission.item_list_filter}}
    <div class="toolbar">

      {{#if (and session.current_user.permission.category_create (eq typeFilter "categories"))}}
        <button type="button" class="tb tb-default" {{action "addCategory"}}> <i class="fa fa-plus" ></i> Category</button>
      {{/if}}

      {{#if (and session.current_user.permission.template_create (eq typeFilter 'templates'))}}
        <button type="button" class="tb tb-default" {{action "addTemplate"}}> <i class="fa fa-plus" ></i> Template</button>
      {{/if}}

      {{#if (and session.current_user.can_modify_item (eq typeFilter 'items'))}}
        <button type="button" class="tb tb-default" {{action "addItem" player}}> <i class="fa fa-plus" ></i> Item</button>
      {{/if}}
    </div>
  {{/if}}
</div>

<div class="item-list">
  {{#if filteredContent.length}}
    {{#ember-collection items=filteredContent cell-layout=(percentage-columns-layout filteredContent.length columns itemHeight) as |item index|}}
      {{item-details item=item details=details onConfirm=(action "showConfirm") onEdit=(action "showEdit")}}
    {{/ember-collection}}
  {{else}}
    {{#if loading}}
      <div class="loader-screen">
        <div class="loader-box">
          <div class="loader-text">
            <i class="loader-spinner fa fa-download fa-pulse"></i>
          </div>
        </div>
      </div>
    {{/if}}
  {{/if}}
</div>

{{#if showCategoryDialog}}
  {{category-create category=currCategory showDialog=showCategoryDialog onConfirm=(action "showConfirm")}}
{{/if}}

{{#if showTemplateDialog}}
  {{template-create template=currTemplate showDialog=showTemplateDialog onConfirm=(action "showConfirm")}}
{{/if}}

{{#if showItemDialog}}
  {{item-create item=currItem showDialog=showItemDialog itemTypeFilter=itemTypeFilter}}
{{/if}}


{{#if showConfirmDialog}}
  {{confirm-dialog showDialog=showConfirmDialog msg=msg onConfirm=(action "onConfirmed")}}
{{/if}}
